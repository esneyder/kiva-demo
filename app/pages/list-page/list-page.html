<StackLayout class="loans-page">
  <Label text="Loans" class="title"></Label>
  <ListView [items]="loans" id="loans-list">
    <template #loan="item">
      <StackLayout orientation="horizontal" class="loan-card" height="250">

        <StackLayout class="details">
          <Label [text]="loan.sector + ' - ' + loan.activity | uppercase" class="bold"></Label>
          <Label [text]="loan.use" textwrap="true" class="green bold"></Label>

          <StackLayout class="progress_section" orientation="horizontal">
            <Label text="Asking: "></Label>
            <Label [text]="'$' + loan.loanAmount"></Label>
          </StackLayout>

          <AbsoluteLayout class="progress-bar-outer" backgroundColor="lightgray" height="10" horizontalAlignment="left">
            <Label top="1"
              left="1"
              backgroundColor="green"
              [width]="getFundingPercent(loan.loanAmount, loan.fundedAmount)"
              height="8" class="progress-bar-inner">
            </Label>
          </AbsoluteLayout>

          <StackLayout orientation="horizontal">
            <Label text="Borrower: "></Label>
            <Label [text]="loan.name" class="bold"></Label>
          </StackLayout>

          <StackLayout orientation="horizontal">
            <Label text="Location: "  textwrap="true"></Label>
            <Label [text]="loan.location.town + ', ' + loan.location.country" textwrap="true" class="bold"></Label>
          </StackLayout>
        </StackLayout>

<!--         <Label class="image" backgroundColor="lightgray" horizontalAlignment="right"></Label> -->
        <Image [src]="getImageSrc(loan.image.src)"
          class="image"
          stretch="none"
          horizontalAlignment="right"></Image>
      </StackLayout>
    </template>
  </ListView>

  <ActivityIndicator [busy]="isLoading"></ActivityIndicator>
</StackLayout>
